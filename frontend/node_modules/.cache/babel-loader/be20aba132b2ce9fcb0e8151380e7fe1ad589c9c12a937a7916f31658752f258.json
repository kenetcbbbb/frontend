{"ast":null,"code":"import React,{useEffect,useState,useMemo}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{api}from\"../api/api\";import{ProductCheckbox}from\"../components/ProductCheckbox\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const ServiceDetails=()=>{const{id}=useParams();const navigate=useNavigate();const[service,setService]=useState(null);const[selectedProducts,setSelectedProducts]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{api.get(\"/services/\".concat(id)).then(res=>{setService(res.data);setLoading(false);}).catch(err=>{console.error(err);setLoading(false);});},[id]);const toggleProduct=productId=>{setSelectedProducts(prev=>prev.includes(productId)?prev.filter(p=>p!==productId):[...prev,productId]);};const totalPrice=useMemo(()=>{if(!service)return 0;const basePrice=Number(service.service.price||0);const selected=service.products.filter(p=>selectedProducts.includes(p.id));const addons=selected.reduce((sum,p)=>sum+Number(p.price||0),0);return(basePrice+addons).toFixed(2);},[service,selectedProducts]);const goToOrder=()=>{navigate(\"/order\",{state:{serviceId:service.service.id,selectedProductIds:selectedProducts,summary:{serviceName:service.service.name,totalPrice}}});};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{padding:\"40px\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})});}if(!service){return/*#__PURE__*/_jsx(\"div\",{style:{padding:\"40px\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0423\\u0441\\u043B\\u0443\\u0433\\u0430 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u0430\"})});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"40px\",maxWidth:\"800px\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"32px\",fontWeight:800,marginBottom:\"8px\",color:\"#1e3a8a\"},children:service.service.name}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#475569\",fontSize:\"16px\",marginBottom:\"24px\"},children:service.service.description}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"20px\",marginBottom:\"12px\",fontWeight:700},children:\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043C\\u043E\\u0434\\u0443\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"24px\"},children:service.products.map(p=>/*#__PURE__*/_jsx(ProductCheckbox,{product:p,selected:selectedProducts.includes(p.id),onChange:toggleProduct},p.id))}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"24px\",padding:\"16px\",borderRadius:\"12px\",background:\"#eff6ff\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"16px\",color:\"#374151\"},children:\"\\u0418\\u0442\\u043E\\u0433\\u043E\\u0432\\u0430\\u044F \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"20px\",fontWeight:700,color:\"#1d4ed8\"},children:[totalPrice,\" \\u20BD\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:goToOrder,style:{padding:\"14px 24px\",background:\"#2563eb\",color:\"white\",border:\"none\",borderRadius:\"12px\",fontSize:\"16px\",fontWeight:600,cursor:\"pointer\"},children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})]});};","map":{"version":3,"names":["React","useEffect","useState","useMemo","useParams","useNavigate","api","ProductCheckbox","jsx","_jsx","jsxs","_jsxs","ServiceDetails","id","navigate","service","setService","selectedProducts","setSelectedProducts","loading","setLoading","get","concat","then","res","data","catch","err","console","error","toggleProduct","productId","prev","includes","filter","p","totalPrice","basePrice","Number","price","selected","products","addons","reduce","sum","toFixed","goToOrder","state","serviceId","selectedProductIds","summary","serviceName","name","style","padding","textAlign","children","maxWidth","margin","fontSize","fontWeight","marginBottom","color","description","map","product","onChange","borderRadius","background","display","justifyContent","alignItems","onClick","border","cursor"],"sources":["/Users/anastasiamaksimovich/Desktop/frontend/src/pages/ServiceDetails.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { api } from \"../api/api\";\nimport { ProductCheckbox } from \"../components/ProductCheckbox\";\n\nexport const ServiceDetails = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const [service, setService] = useState(null);\n  const [selectedProducts, setSelectedProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    api\n      .get(`/services/${id}`)\n      .then((res) => {\n        setService(res.data);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.error(err);\n        setLoading(false);\n      });\n  }, [id]);\n\n  const toggleProduct = (productId) => {\n    setSelectedProducts((prev) =>\n      prev.includes(productId)\n        ? prev.filter((p) => p !== productId)\n        : [...prev, productId]\n    );\n  };\n\n  const totalPrice = useMemo(() => {\n    if (!service) return 0;\n    const basePrice = Number(service.service.price || 0);\n    const selected = service.products.filter((p) =>\n      selectedProducts.includes(p.id)\n    );\n    const addons = selected.reduce(\n      (sum, p) => sum + Number(p.price || 0),\n      0\n    );\n    return (basePrice + addons).toFixed(2);\n  }, [service, selectedProducts]);\n\n  const goToOrder = () => {\n    navigate(\"/order\", {\n      state: {\n        serviceId: service.service.id,\n        selectedProductIds: selectedProducts,\n        summary: {\n          serviceName: service.service.name,\n          totalPrice,\n        },\n      },\n    });\n  };\n\n  if (loading) {\n    return (\n      <div style={{ padding: \"40px\", textAlign: \"center\" }}>\n        <h2>Загрузка...</h2>\n      </div>\n    );\n  }\n\n  if (!service) {\n    return (\n      <div style={{ padding: \"40px\", textAlign: \"center\" }}>\n        <h2>Услуга не найдена</h2>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        padding: \"40px\",\n        maxWidth: \"800px\",\n        margin: \"0 auto\",\n      }}\n    >\n      <h2\n        style={{\n          fontSize: \"32px\",\n          fontWeight: 800,\n          marginBottom: \"8px\",\n          color: \"#1e3a8a\",\n        }}\n      >\n        {service.service.name}\n      </h2>\n\n      <p\n        style={{\n          color: \"#475569\",\n          fontSize: \"16px\",\n          marginBottom: \"24px\",\n        }}\n      >\n        {service.service.description}\n      </p>\n\n      <h3\n        style={{\n          fontSize: \"20px\",\n          marginBottom: \"12px\",\n          fontWeight: 700,\n        }}\n      >\n        Дополнительные модули\n      </h3>\n\n      <div style={{ marginBottom: \"24px\" }}>\n        {service.products.map((p) => (\n          <ProductCheckbox\n            key={p.id}\n            product={p}\n            selected={selectedProducts.includes(p.id)}\n            onChange={toggleProduct}\n          />\n        ))}\n      </div>\n\n      <div\n        style={{\n          marginBottom: \"24px\",\n          padding: \"16px\",\n          borderRadius: \"12px\",\n          background: \"#eff6ff\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n        }}\n      >\n        <span style={{ fontSize: \"16px\", color: \"#374151\" }}>\n          Итоговая стоимость:\n        </span>\n        <span\n          style={{\n            fontSize: \"20px\",\n            fontWeight: 700,\n            color: \"#1d4ed8\",\n          }}\n        >\n          {totalPrice} ₽\n        </span>\n      </div>\n\n      <button\n        onClick={goToOrder}\n        style={{\n          padding: \"14px 24px\",\n          background: \"#2563eb\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: \"12px\",\n          fontSize: \"16px\",\n          fontWeight: 600,\n          cursor: \"pointer\",\n        }}\n      >\n        Оформить заказ\n      </button>\n    </div>\n  );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,OAAO,KAAQ,OAAO,CAC3D,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,GAAG,KAAQ,YAAY,CAChC,OAASC,eAAe,KAAQ,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhE,MAAO,MAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAClC,KAAM,CAAEC,EAAG,CAAC,CAAGT,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAU,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACdK,GAAG,CACAe,GAAG,cAAAC,MAAA,CAAcT,EAAE,CAAE,CAAC,CACtBU,IAAI,CAAEC,GAAG,EAAK,CACbR,UAAU,CAACQ,GAAG,CAACC,IAAI,CAAC,CACpBL,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACDM,KAAK,CAAEC,GAAG,EAAK,CACdC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAClBP,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,CAACP,EAAE,CAAC,CAAC,CAER,KAAM,CAAAiB,aAAa,CAAIC,SAAS,EAAK,CACnCb,mBAAmB,CAAEc,IAAI,EACvBA,IAAI,CAACC,QAAQ,CAACF,SAAS,CAAC,CACpBC,IAAI,CAACE,MAAM,CAAEC,CAAC,EAAKA,CAAC,GAAKJ,SAAS,CAAC,CACnC,CAAC,GAAGC,IAAI,CAAED,SAAS,CACzB,CAAC,CACH,CAAC,CAED,KAAM,CAAAK,UAAU,CAAGjC,OAAO,CAAC,IAAM,CAC/B,GAAI,CAACY,OAAO,CAAE,MAAO,EAAC,CACtB,KAAM,CAAAsB,SAAS,CAAGC,MAAM,CAACvB,OAAO,CAACA,OAAO,CAACwB,KAAK,EAAI,CAAC,CAAC,CACpD,KAAM,CAAAC,QAAQ,CAAGzB,OAAO,CAAC0B,QAAQ,CAACP,MAAM,CAAEC,CAAC,EACzClB,gBAAgB,CAACgB,QAAQ,CAACE,CAAC,CAACtB,EAAE,CAChC,CAAC,CACD,KAAM,CAAA6B,MAAM,CAAGF,QAAQ,CAACG,MAAM,CAC5B,CAACC,GAAG,CAAET,CAAC,GAAKS,GAAG,CAAGN,MAAM,CAACH,CAAC,CAACI,KAAK,EAAI,CAAC,CAAC,CACtC,CACF,CAAC,CACD,MAAO,CAACF,SAAS,CAAGK,MAAM,EAAEG,OAAO,CAAC,CAAC,CAAC,CACxC,CAAC,CAAE,CAAC9B,OAAO,CAAEE,gBAAgB,CAAC,CAAC,CAE/B,KAAM,CAAA6B,SAAS,CAAGA,CAAA,GAAM,CACtBhC,QAAQ,CAAC,QAAQ,CAAE,CACjBiC,KAAK,CAAE,CACLC,SAAS,CAAEjC,OAAO,CAACA,OAAO,CAACF,EAAE,CAC7BoC,kBAAkB,CAAEhC,gBAAgB,CACpCiC,OAAO,CAAE,CACPC,WAAW,CAAEpC,OAAO,CAACA,OAAO,CAACqC,IAAI,CACjChB,UACF,CACF,CACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAIjB,OAAO,CAAE,CACX,mBACEV,IAAA,QAAK4C,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,cACnD/C,IAAA,OAAA+C,QAAA,CAAI,qDAAW,CAAI,CAAC,CACjB,CAAC,CAEV,CAEA,GAAI,CAACzC,OAAO,CAAE,CACZ,mBACEN,IAAA,QAAK4C,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,cACnD/C,IAAA,OAAA+C,QAAA,CAAI,8FAAiB,CAAI,CAAC,CACvB,CAAC,CAEV,CAEA,mBACE7C,KAAA,QACE0C,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfG,QAAQ,CAAE,OAAO,CACjBC,MAAM,CAAE,QACV,CAAE,CAAAF,QAAA,eAEF/C,IAAA,OACE4C,KAAK,CAAE,CACLM,QAAQ,CAAE,MAAM,CAChBC,UAAU,CAAE,GAAG,CACfC,YAAY,CAAE,KAAK,CACnBC,KAAK,CAAE,SACT,CAAE,CAAAN,QAAA,CAEDzC,OAAO,CAACA,OAAO,CAACqC,IAAI,CACnB,CAAC,cAEL3C,IAAA,MACE4C,KAAK,CAAE,CACLS,KAAK,CAAE,SAAS,CAChBH,QAAQ,CAAE,MAAM,CAChBE,YAAY,CAAE,MAChB,CAAE,CAAAL,QAAA,CAEDzC,OAAO,CAACA,OAAO,CAACgD,WAAW,CAC3B,CAAC,cAEJtD,IAAA,OACE4C,KAAK,CAAE,CACLM,QAAQ,CAAE,MAAM,CAChBE,YAAY,CAAE,MAAM,CACpBD,UAAU,CAAE,GACd,CAAE,CAAAJ,QAAA,CACH,2HAED,CAAI,CAAC,cAEL/C,IAAA,QAAK4C,KAAK,CAAE,CAAEQ,YAAY,CAAE,MAAO,CAAE,CAAAL,QAAA,CAClCzC,OAAO,CAAC0B,QAAQ,CAACuB,GAAG,CAAE7B,CAAC,eACtB1B,IAAA,CAACF,eAAe,EAEd0D,OAAO,CAAE9B,CAAE,CACXK,QAAQ,CAAEvB,gBAAgB,CAACgB,QAAQ,CAACE,CAAC,CAACtB,EAAE,CAAE,CAC1CqD,QAAQ,CAAEpC,aAAc,EAHnBK,CAAC,CAACtB,EAIR,CACF,CAAC,CACC,CAAC,cAENF,KAAA,QACE0C,KAAK,CAAE,CACLQ,YAAY,CAAE,MAAM,CACpBP,OAAO,CAAE,MAAM,CACfa,YAAY,CAAE,MAAM,CACpBC,UAAU,CAAE,SAAS,CACrBC,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QACd,CAAE,CAAAf,QAAA,eAEF/C,IAAA,SAAM4C,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEG,KAAK,CAAE,SAAU,CAAE,CAAAN,QAAA,CAAC,0GAErD,CAAM,CAAC,cACP7C,KAAA,SACE0C,KAAK,CAAE,CACLM,QAAQ,CAAE,MAAM,CAChBC,UAAU,CAAE,GAAG,CACfE,KAAK,CAAE,SACT,CAAE,CAAAN,QAAA,EAEDpB,UAAU,CAAC,SACd,EAAM,CAAC,EACJ,CAAC,cAEN3B,IAAA,WACE+D,OAAO,CAAE1B,SAAU,CACnBO,KAAK,CAAE,CACLC,OAAO,CAAE,WAAW,CACpBc,UAAU,CAAE,SAAS,CACrBN,KAAK,CAAE,OAAO,CACdW,MAAM,CAAE,MAAM,CACdN,YAAY,CAAE,MAAM,CACpBR,QAAQ,CAAE,MAAM,CAChBC,UAAU,CAAE,GAAG,CACfc,MAAM,CAAE,SACV,CAAE,CAAAlB,QAAA,CACH,iFAED,CAAQ,CAAC,EACN,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}